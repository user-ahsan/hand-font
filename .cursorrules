# Cursor Rules for HandFont App - Production Development Workflow

## ğŸš¨ CRITICAL: NO HALLUCINATION RULES

### **ABSOLUTELY FORBIDDEN:**
- âŒ Creating files that don't exist in the task specifications
- âŒ Inventing new directories or folder structures
- âŒ Adding dependencies not listed in package.json files
- âŒ Creating new routes or endpoints not specified
- âŒ Adding new database models not in Prisma schema
- âŒ Creating new components not in the task list
- âŒ Adding new pages not in the app directory structure
- âŒ Implementing features not explicitly requested

### **STRICT FILE STRUCTURE ENFORCEMENT:**
- âœ… ONLY work with files that exist in the project
- âœ… ONLY create files specified in the task requirements
- âœ… Follow EXACT directory structure from task files
- âœ… Use EXACT file names and paths specified
- âœ… NO deviations from the established architecture

## ğŸ—ï¸ PROJECT ARCHITECTURE ENFORCEMENT

### **Root Directory (hand-font/)**
```
hand-font/
â”œâ”€â”€ package.json (root with workspaces)
â”œâ”€â”€ frontend/ (Next.js 15.4.0-canary.74)
â”œâ”€â”€ backend/ (Node.js 22.0.0 + Express 5.0.0)
â”œâ”€â”€ docs/ (documentation only)
â””â”€â”€ README.md
```

### **Frontend Structure (frontend/)**
```
frontend/
â”œâ”€â”€ package.json
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ public/
â””â”€â”€ src/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ (guest)/
    â”‚   â”‚   â”œâ”€â”€ page.tsx (Landing)
    â”‚   â”‚   â”œâ”€â”€ capture/page.tsx (Capture Wizard)
    â”‚   â”‚   â”œâ”€â”€ preview/page.tsx (Preview)
    â”‚   â”‚   â””â”€â”€ export/page.tsx (Export)
    â”‚   â”œâ”€â”€ (pro)/
    â”‚   â”‚   â”œâ”€â”€ dashboard/page.tsx (Dashboard)
    â”‚   â”‚   â””â”€â”€ fonts/[id]/page.tsx (Font Detail)
    â”‚   â”œâ”€â”€ layout.tsx (Root Layout)
    â”‚   â””â”€â”€ globals.css
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ ui/ (shadcn/ui components)
    â”‚   â”œâ”€â”€ canvas/ (Drawing components)
    â”‚   â”œâ”€â”€ layout/ (Layout components)
    â”‚   â”œâ”€â”€ forms/ (Form components)
    â”‚   â””â”€â”€ shared/ (Shared components)
    â”œâ”€â”€ hooks/ (Custom hooks)
    â”œâ”€â”€ lib/ (Utilities and configs)
    â”œâ”€â”€ stores/ (Zustand stores)
    â”œâ”€â”€ types/ (TypeScript types)
    â””â”€â”€ utils/ (Helper functions)
```

### **Backend Structure (backend/)**
```
backend/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ nodemon.json
â”œâ”€â”€ .env.example
â”œâ”€â”€ .env
â””â”€â”€ src/
    â”œâ”€â”€ index.ts (Server entry point)
    â”œâ”€â”€ app.ts (Express app configuration)
    â”œâ”€â”€ config/
    â”‚   â”œâ”€â”€ database.ts (Database configuration)
    â”‚   â”œâ”€â”€ environment.ts (Environment variables)
    â”‚   â””â”€â”€ cors.ts (CORS configuration)
    â”œâ”€â”€ routes/
    â”‚   â”œâ”€â”€ index.ts (Route aggregator)
    â”‚   â”œâ”€â”€ auth.routes.ts (Authentication routes)
    â”‚   â”œâ”€â”€ font.routes.ts (Font generation routes)
    â”‚   â”œâ”€â”€ user.routes.ts (User management routes)
    â”‚   â””â”€â”€ health.routes.ts (Health check routes)
    â”œâ”€â”€ controllers/
    â”‚   â”œâ”€â”€ auth.controller.ts (Authentication logic)
    â”‚   â”œâ”€â”€ font.controller.ts (Font generation logic)
    â”‚   â”œâ”€â”€ user.controller.ts (User management logic)
    â”‚   â””â”€â”€ health.controller.ts (Health check logic)
    â”œâ”€â”€ services/
    â”‚   â”œâ”€â”€ font.service.ts (Font processing service)
    â”‚   â”œâ”€â”€ storage.service.ts (File storage service)
    â”‚   â”œâ”€â”€ auth.service.ts (Authentication service)
    â”‚   â””â”€â”€ user.service.ts (User management service)
    â”œâ”€â”€ middleware/
    â”‚   â”œâ”€â”€ auth.middleware.ts (JWT verification)
    â”‚   â”œâ”€â”€ validation.middleware.ts (Request validation)
    â”‚   â”œâ”€â”€ rateLimiter.middleware.ts (Rate limiting)
    â”‚   â””â”€â”€ errorHandler.middleware.ts (Error handling)
    â”œâ”€â”€ utils/
    â”‚   â”œâ”€â”€ logger.ts (Logging utility)
    â”‚   â”œâ”€â”€ validator.ts (Validation utilities)
    â”‚   â”œâ”€â”€ response.ts (Response formatting)
    â”‚   â””â”€â”€ fileUtils.ts (File handling utilities)
    â”œâ”€â”€ types/
    â”‚   â”œâ”€â”€ express.d.ts (Express type extensions)
    â”‚   â”œâ”€â”€ font.types.ts (Font-related types)
    â”‚   â”œâ”€â”€ user.types.ts (User-related types)
    â”‚   â””â”€â”€ api.types.ts (API response types)
    â””â”€â”€ prisma/
        â”œâ”€â”€ schema.prisma (Database schema)
        â””â”€â”€ migrations/ (Database migrations)
```

## ğŸ“š DEPENDENCY ENFORCEMENT

### **Root Dependencies (hand-font/package.json)**
```json
{
  "devDependencies": {
    "concurrently": "^8.2.2"
  }
}
```

### **Frontend Dependencies (frontend/package.json)**
```json
{
  "dependencies": {
    "next": "15.4.0-canary.74",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "typescript": "^5.5.0",
    "tailwindcss": "^3.4.0",
    "autoprefixer": "^10.4.0",
    "postcss": "^8.4.0",
    "@radix-ui/react-slot": "^1.0.0",
    "@radix-ui/react-toast": "^1.1.0",
    "@radix-ui/react-slider": "^1.1.0",
    "@radix-ui/react-tabs": "^1.1.0",
    "class-variance-authority": "^0.7.0",
    "clsx": "^2.1.0",
    "tailwind-merge": "^2.2.0",
    "zustand": "^4.5.0",
    "framer-motion": "^11.0.0",
    "react-hook-form": "^7.51.0",
    "lucide-react": "^0.400.0"
  },
  "devDependencies": {
    "@types/node": "^22.0.0",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "eslint": "^9.0.0",
    "eslint-config-next": "15.4.0-canary.74",
    "prettier": "^3.3.0",
    "prettier-plugin-tailwindcss": "^0.5.0"
  }
}
```

### **Backend Dependencies (backend/package.json)**
```json
{
  "dependencies": {
    "express": "^5.0.0",
    "cors": "^2.8.5",
    "helmet": "^8.0.0",
    "morgan": "^1.10.0",
    "dotenv": "^16.3.1",
    "prisma": "^5.10.0",
    "@prisma/client": "^5.10.0",
    "clerk": "^0.0.0",
    "multer": "^1.4.5-lts.1",
    "sharp": "^0.33.0",
    "uuid": "^10.0.0",
    "zod": "^3.23.0",
    "express-rate-limit": "^8.0.0",
    "compression": "^1.7.4"
  },
  "devDependencies": {
    "@types/express": "^5.0.0",
    "@types/cors": "^2.8.17",
    "@types/morgan": "^1.9.9",
    "@types/node": "^22.0.0",
    "@types/multer": "^1.4.11",
    "@types/uuid": "^10.0.0",
    "@types/compression": "^1.7.5",
    "typescript": "^5.5.0",
    "ts-node": "^10.9.1",
    "nodemon": "^3.1.0",
    "prisma": "^5.10.0"
  }
}
```

## ğŸ¯ DEVELOPMENT LIFECYCLE ENFORCEMENT

### **PHASE 1: PROJECT SETUP & FOUNDATION**
1. Root project setup with workspaces
2. Frontend Next.js 15 setup
3. Backend Express 5 setup
4. shadcn/ui initialization

### **PHASE 2: CORE COMPONENTS DEVELOPMENT**
1. Basic UI components (shadcn/ui based)
2. Canvas drawing components (HTML5 Canvas)

### **PHASE 3: SPECIALIZED DRAWING COMPONENTS**
1. Dynamic drawing components (NO fixed sizes)
2. Dynamic pangram drawing
3. Dynamic numerals & symbols

### **PHASE 4: PAGE COMPONENTS & LAYOUT**
1. App shell & navigation
2. Landing page
3. Capture wizard page

### **PHASE 5: PREVIEW & EXPORT FUNCTIONALITY**
1. Preview panel component
2. Preview page
3. Export page

### **PHASE 6: STATE MANAGEMENT & INTEGRATION**
1. Zustand store implementation
2. API integration
3. Data persistence

### **PHASE 7: RESPONSIVE DESIGN & MOBILE OPTIMIZATION**
1. Mobile-first responsiveness
2. Touch & pointer optimization

### **PHASE 8: ACCESSIBILITY & TESTING**
1. Accessibility implementation
2. Error handling & validation
3. Testing & quality assurance

### **PHASE 9: FINAL INTEGRATION & POLISH**
1. Performance optimization
2. Final testing & bug fixes
3. Documentation & deployment prep

## ğŸ”’ STRICT ENFORCEMENT RULES

### **File Creation Rules:**
- âœ… ONLY create files specified in the current task
- âœ… NEVER create placeholder or temporary files
- âœ… NEVER create "example" or "demo" files
- âœ… NEVER create multiple versions of the same file
- âœ… NEVER create backup or duplicate files

### **Code Implementation Rules:**
- âœ… ONLY implement features specified in the current task
- âœ… NEVER add "bonus" or "extra" functionality
- âœ… NEVER implement features from future phases
- âœ… NEVER create "nice-to-have" features
- âœ… NEVER add experimental or untested code

### **Dependency Rules:**
- âœ… ONLY use dependencies listed in package.json
- âœ… NEVER add new npm packages
- âœ… NEVER suggest alternative libraries
- âœ… NEVER add polyfills or shims
- âœ… NEVER add development tools not specified

### **Architecture Rules:**
- âœ… ONLY use the specified file structure
- âœ… NEVER create new directories
- âœ… NEVER reorganize existing structure
- âœ… NEVER add new routing patterns
- âœ… NEVER create new middleware layers

## ğŸš¨ ERROR PREVENTION

### **Common Hallucination Patterns to Avoid:**
1. **"Let me create a better version"** - NO, use existing structure
2. **"I'll add some extra features"** - NO, stick to requirements
3. **"This could be improved by"** - NO, implement as specified
4. **"Let me create a helper"** - NO, unless explicitly requested
5. **"I'll add some validation"** - NO, unless in current task

### **File Naming Enforcement:**
- âœ… Use EXACT names from task specifications
- âœ… NO variations or alternatives
- âœ… NO abbreviations or shortcuts
- âœ… NO creative naming

### **Import/Export Enforcement:**
- âœ… Use EXACT import paths from task specifications
- âœ… NO relative path variations
- âœ… NO alias variations
- âœ… NO dynamic imports unless specified

## ğŸ“‹ TASK COMPLETION VERIFICATION

### **Before Marking Task Complete:**
1. âœ… File exists in correct location
2. âœ… File name matches exactly
3. âœ… Content matches task requirements
4. âœ… No extra features added
5. âœ… No placeholder code
6. âœ… No TODO comments
7. âœ… No console.log statements
8. âœ… No debugging code

### **Code Quality Standards:**
1. âœ… TypeScript strict mode compliance
2. âœ… No `any` types
3. âœ… Proper error handling
4. âœ… Production-ready code
5. âœ… No development artifacts
6. âœ… Clean, readable code
7. âœ… Proper documentation
8. âœ… Accessibility compliance

## ğŸ¯ FINAL REMINDER

**REMEMBER:** This is a production application with a strict development workflow. Every file, component, and feature must be exactly as specified in the task files. There is NO room for creativity, experimentation, or "improvements" beyond what is explicitly requested.

**FOLLOW THE TASKS EXACTLY AS WRITTEN. NO DEVIATIONS. NO HALLUCINATIONS. NO EXTRA FEATURES.**

The AI must work like a precise machine, implementing exactly what is specified and nothing more. This ensures consistency, reliability, and adherence to the production development standards.
